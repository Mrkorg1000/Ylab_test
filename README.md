# FastA_menu_project
### Fast Api training project

Тренировочный проект на FAST API

Вводные:
Даны 3 сущности: Меню, Подменю, Блюдо.

### Зависимости:
- У меню есть подменю, которые к ней привязаны.
- Уподменю есть блюда.
Условия: 

- Блюдо не может быть привязано напрямую к меню, минуя подменю. 
- Блюдо не может находиться в 2-х подменю одновременно. 
- Подменю не может находиться в 2-х меню одновременно.
- Если удалить меню, должны удалиться все подменю и блюда этого меню. 
- Если удалить подменю, должны удалиться все блюда этого подменю.  
- Во время выдачи списка меню, для каждого меню добавлять кол-во подменю и блюд в этом меню. 
- Во время выдачи списка подменю, для каждого подменю добавлять кол-во блюд в этом подменю. 
- Во время запуска тестового сценария БД должна быть пуста.


### Стэк (будет дополняться):

- fast api
- alembic 
- sqlalchemy
- Postgres

## Инструкция

Для локального тестирования необходимо создать виртуальное окружение и загрузить зависимости командой `pip install -r requirements.txt` и активировать его.

Для поднятия Базы Данных и Adminer - `docker-compose up`       

Затем необходимо запустить команду `uvicorn main:app --reload` для запуска сервера `uvicorn`. 

Для создания таблиц в БД - `alembic upgrade head` 

После этого можно зайти в браузере по адресу `http://localhost:8000/docs` для просмотра доступных эндпоинтов.


## Тестирование

Для локального тестрования эндпойнтов необходимо запускать по-модульно из корневой дирректории проекта:

`pytest tests/test_menu.py -vv`  -   Тестирование эндпойнтов по Меню

`pytest tests/test_submenu.py -vv`  -   Тестирование эндпойнтов по Подменю

`pytest tests/test_dish.py -vv`  -   Тестирование эндпойнтов по Блюдам

`pytest tests/test_submenu_and_dish_count_in_menu.py -vv`  -  Проверка кол-ва блюд и подменю в меню